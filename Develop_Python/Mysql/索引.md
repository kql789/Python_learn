# 索引概述

## 定义：
对数据库的一列或多列的值进行排序的一种结构(Btree方式)

优点：
加快数据检索速度
缺点：
占用物理存储空间(var/lib/mysql)

## Btree的特点：
    1. 全部节点均包含索引+数据
    2. 范围查询，从根节点遍历至指定数据
## B+ tree特点：
    1. 非叶子节点只包含索引(宽度优于Btree ，从而降低了磁盘IO)
    2. 叶子节点保存所有数据和索引。
    3. 叶子节点保存所有索引和数据，形成链表结构
## 区别与联系
在相同体量上，Btree要比B+tree要高的多，因为Btree的所有节点都保存索引和数据。

## 索引的优点：
加快数据索引速度
## 索引的缺点：
1.  占据物理存储空间。
2. 数据更新时，索引需要动态维护，降低数据维护速度。

## 索引分类
### 使用规则
1. 可设置多个索引
2. 普通索引，字段无约束，KEY标志为：MUL
3. 唯一索引，unique，字段不允许重复，但可以为NULL,KEY为UNI。
## 创建索引
建表时创建
```sql
create table name (
    int, index(id),unique (id)   
)
```
已有表中创建索引
```sql
create [unique] index 索引名 on tablename (字段名)
```
## 查看索引
    desc tablename
    show index from tablename \G
## 删除索引
    drop 索引名 on tablename;

### Mysql索引为什么使用B+tree 而不是使用跳表？
1. B+是多叉树结构，每个节点都是一个16K的数据页，能存放较多的索引信息，所以扇出很高。三层左右就可以存储2kw左右的数据。
也就是说查询一次数据，如果这些数据页都在磁盘里，那么最多要查询三次磁盘IO即可。
2. 跳表是链表结构，一条数据一个节点，如果最底层要存放2kw数据，且每次查询都要能达到二分查找的效果，2kw大概在2的24次方
左右，所以跳表大概高度在24层左右。最坏情况下，这24层分散在不同的数据页里，也即是查询一次数据会经历24次磁盘IO。
3.因此存放同样两级的数据，B+树的高度比跳表的要少，如果放在数据库mysql来说，就是磁盘IO次数更少，查询数据更快。
4. 而针对写操作，B+树需要拆分合并索引数据页，跳表则独立插入，并根据随机函数确定层数，没有旋转和平衡的开销，因此跳表的写入
性能会比B+树要好。
   
